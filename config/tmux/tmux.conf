## set dirs
tmux_dir="~/.config/tmux"
tmux_conf_dir="$tmux_dir/config"
tmux_plugins_dir="$tmux_dir/plugins"


##
## main config
unbind C-d
unbind C-b
set -g prefix C-a
set -g default-terminal "xterm-256color"
set -s terminal-overrides ",xterm*:Tc"
set -g focus-events on
setw -g xterm-keys on
set -g detach-on-destroy off
set -g mouse on

##
## misc config
set -g history-limit 1000000                                ## set history limit to 100000
set -g escape-time 0                                        ## set escape time to 0ms
set -g repeat-time 600                                      ## set repeat time to 600ms
set -g base-index 1                                         ## start windows at 1
set -g pane-base-index 1                                    ## start panes at 1
set -g renumber-windows on                                  ## renumber windows when closed
set -g set-clipboard on                                     ## enable system clipboard
set -g allow-rename on                                      ## disable renaming windows
setw -g mode-keys vi                                        ## set vi mode


##
## plugins
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'dracula/tmux'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'
#set -g @plugin 'tmux-plugins/tmux-pain-control'
#set -g @plugin 'tmux-plugins/tmux-yank'
#set -g @plugin 'erikw/tmux-powerline'
set -g @plugin 'joshmedeski/sesh'
set -g @plugin 'jimeh/tmuxifier'
set -g @plugin 'nhdaly/tmux-better-mouse-mode'
set -g @plugin 'joshmedeski/tmux-nerd-font-window-name'


##
## plugin config
set -g @resurrect-strategy-vim 'session'                    ## restore vim sessions
set -g @resurrect-strategy-nvim 'session'                   ## restore neovim sessions
set -g @resurrect-capture-pane-contents 'on'                ## restore pane contents
set -g @continuum-restore 'on'                              ## restore last saved environment

# dracula theme config
set -g @dracula-plugins "git cpu-usage ram-usage"
set -g @dracula-show-empty-plugins false
set -g @dracula-show-powerline true
set -g @dracula-powerline-separator-left ""
set -g @dracula-powerline-separator-right ""
set -g @dracula-show-left-icon "#S"
set -g @dracula-show-right-icon ""
set -g @dracula-show-session-name true


##
## split config
bind v split-window -h -c "#{pane_current_path}"                ## vertical split
bind s split-window -v -c "#{pane_current_path}"                ## horizontal split
bind c new-window -c "#{pane_current_path}"                 ## create new window
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R


##
## status bar config
setw -g monitor-activity on                                 ## monitor activity
set -g visual-activity off                                  ## disable visual activity
set -g status-interval 2                                    ## update status bar every 2 seconds
set -g status-position top                                  ## set status bar position
set -g status-left-length 200                               ## set status bar length

##
## other binds
bind t next-window                                                  ## switch to next window
bind T previous-window                                              ## switch to previous window
bind C-o rotate-window -D                                           ## rotate windows down
bind -n S-Left previous-window                                      ## switch to previous window
bind -n S-Right next-window                                         ## switch to next window
bind -n C-S-Left swap-window -t -1                                  ## swap windows left
bind -n C-S-Right swap-window -t +1                                 ## swap windows right
bind S choose-session                                               ## switch sessions
bind -n M-b switch-client -l                                        ## switch to last client
bind -n M-n switch-client -n                                        ## switch to next client
bind -n M-p switch-client -p                                        ## switch to previous client
bind -T copy-mode-vi v send-keys -X begin-selection                 ## start selection
bind -T copy-mode-vi y send-keys -X copy-selection-and-cancel       ## copy selection
bind -T copy-mode-vi C-v send-keys -X rectangle-toggle              ## toggle rectangle selection
bind C-j new-window -n "session-switcher" "tmux list-sessions | sed -E 's/:.*$//' | grep -v \"^$(tmux display-message -p '#S')\$\" | fzf --reverse | xargs tmux switch-client -t"


##
## load plugins
run "$tmux_plugins_dir/tpm/tpm"
